"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[584],{8785:function(e,t,n){n.d(t,{Z:function(){return C}});var r=n(5861),a=n(4687),i=n.n(a),o=n(1243),u=[{id:28,name:"Action"},{id:12,name:"Adventure"},{id:16,name:"Animation"},{id:35,name:"Comedy"},{id:80,name:"Crime"},{id:99,name:"Documentary"},{id:18,name:"Drama"},{id:10751,name:"Family"},{id:14,name:"Fantasy"},{id:36,name:"History"},{id:27,name:"Horror"},{id:10402,name:"Music"},{id:9648,name:"Mystery"},{id:10749,name:"Romance"},{id:878,name:"Science Fiction"},{id:10770,name:"TV Movie"},{id:53,name:"Thriller"},{id:10752,name:"War"},{id:37,name:"Western"}];var c=function(e){return e.map((function(e){return u.find((function(t){return t.id===e}))})).map((function(e){return e.name})).join(", ")},s=n.p+"static/media/poster.baa212b4ab56e6c8735f.jpg",l=s,d=function(e){return e?"".concat("https://image.tmdb.org/t/p/w500").concat(e):l},p=function(e){return e.split("-")[0]},f=function(e){return Math.floor(e)},m=function(e){return e.map((function(e){return e.name})).join(", ")},v=function(e){return e.toFixed(1)},g=n.p+"static/media/avatar.9c54ede653c8ca2c7384.jpg",h=g,x=function(e){return e?"".concat("https://image.tmdb.org/t/p/w500").concat(e):h},_={dataFilter:function(e){var t=e.results.map((function(e){return console.log(e.genre_ids),{adult:e.adult,genre_ids:c(e.genre_ids),id:e.id,poster_path:d(e.poster_path),release_date:p(e.release_date),title:e.title,vote_average:v(e.vote_average)}}));return{page:e.page,results:t,total_pages:e.total_pages}},dataDetailsFilter:function(e){return{budget:e.budget,genres:m(e.genres),original_title:e.original_title,overview:e.overview,popularity:f(e.popularity),poster_path:d(e.poster_path),release_date:p(e.release_date),title:e.title.toUpperCase(),vote_average:v(e.vote_average),vote_count:e.vote_count}},dataCastFilter:function(e){return e.cast.map((function(e){return{id:e.id,profile_path:x(e.profile_path),name:e.name,character:e.character}}))}},b=_;o.Z.defaults.baseURL="https://api.themoviedb.org/3/";var w="4efc7dd075300afeff5dc61a2436592d",Z=function(){var e=(0,r.Z)(i().mark((function e(t){var n,r,a,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.signal,e.next=3,o.Z.get("trending/movie/day?api_key=".concat(w),{signal:n});case 3:if(r=e.sent,0!==(a=r.data).results.length){e.next=7;break}throw new Error;case 7:return u=b.dataFilter(a),e.abrupt("return",u);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=(0,r.Z)(i().mark((function e(t,n){var r,a,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.Z.get("search/movie?api_key=".concat(w,"&query=").concat(t,"&page=").concat(n,"&include_adult=false"));case 2:if(r=e.sent,0!==(a=r.data).results.length){e.next=6;break}throw new Error;case 6:return u=b.dataFilter(a),e.abrupt("return",u);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),j=function(){var e=(0,r.Z)(i().mark((function e(t){var n,r,a,u,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.movieId,r=t.signal,e.next=3,o.Z.get("movie/".concat(n,"?api_key=").concat(w,"&language=en-US"),{signal:r});case 3:if(a=e.sent,0!==(u=a.data).length){e.next=7;break}throw new Error;case 7:return c=b.dataDetailsFilter(u),e.abrupt("return",c);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=(0,r.Z)(i().mark((function e(t){var n,r,a,u,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.movieId,r=t.signal,e.next=3,o.Z.get("movie/".concat(n,"/credits?api_key=").concat(w,"&language=en-US"),{signal:r});case 3:if(a=e.sent,u=a.data,console.log(u),0!==u.length){e.next=8;break}throw new Error;case 8:return c=b.dataCastFilter(u),console.log(c),e.abrupt("return",c);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=(0,r.Z)(i().mark((function e(t){var n,r,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.movieId,r=t.signal,e.next=3,o.Z.get("movie/".concat(n,"/reviews?api_key=").concat(w,"&language=en-US&page=1"),{signal:r});case 3:if(0!==(a=e.sent).length){e.next=6;break}throw new Error;case 6:return e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C={getTrending:Z,getSearchMovie:k,getMovieDetails:j,getMovieCredits:y,getMovieReviews:S}},7504:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(7689),a=n(1087),i=n(6249),o=n(184),u=function(e){var t=e.movie,n=t.id,u=t.title,c=t.genre_ids,s=t.poster_path,l=t.release_date,d=t.vote_average,p=(0,r.TH)();return console.log(t),(0,o.jsx)("li",{children:(0,o.jsxs)(a.rU,{to:i.Z.STATIC_MOVIE_ID(n),state:{from:p},children:[(0,o.jsx)("img",{src:s,alt:u}),(0,o.jsx)("h2",{children:u}),(0,o.jsxs)("p",{children:[c," ",l," | ",d]})]})})},c=function(e){var t=e.movies;return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("ul",{children:t&&t.map((function(e){return(0,o.jsx)(u,{movie:e},e.id)}))})})}},5698:function(e,t,n){n.r(t),n.d(t,{default:function(){return h}});var r=n(3433),a=n(5861),i=n(9439),o=n(4687),u=n.n(o),c=n(2791),s=n(9014),l=n(1243),d=n(6456),p=n(8785),f=n(184),m=function(e){var t=e.onSubmit,n=(0,c.useState)(""),r=(0,i.Z)(n,2),a=r[0],o=r[1];return(0,f.jsxs)("header",{children:[(0,f.jsx)(s.x7,{position:"top-right"}),(0,f.jsxs)("form",{onSubmit:function(e){e.preventDefault(),""!==a?t(a):s.Am.error("\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u0437\u043d\u0430\u0447\u0435\u043d\u043d\u044f \u0434\u043b\u044f \u043f\u043e\u0448\u0443\u043a\u0443!")},children:[(0,f.jsx)("input",{type:"text",value:a,onChange:function(e){var t=e.target.value.trim().toLowerCase();t&&o(t)},autoComplete:"off",autoFocus:!0,placeholder:"Enter name of movie...",required:!0}),(0,f.jsx)("button",{type:"submit",children:"Search"})]})]})},v=function(e){var t=e.addPage;return(0,f.jsx)("div",{children:(0,f.jsx)("button",{type:"button",onClick:t,children:"Load More"})})},g=n(7504),h=function(){var e=(0,c.useState)([]),t=(0,i.Z)(e,2),n=t[0],o=t[1],h=(0,c.useState)(!1),x=(0,i.Z)(h,2),_=x[0],b=x[1],w=(0,c.useState)(null),Z=(0,i.Z)(w,2),k=Z[0],j=Z[1],y=(0,c.useState)(""),S=(0,i.Z)(y,2),C=S[0],F=S[1],M=(0,c.useState)(1),E=(0,i.Z)(M,2),D=E[0],A=E[1],I=(0,c.useState)(0),T=(0,i.Z)(I,2),U=T[0],H=T[1];(0,c.useEffect)((function(){var e=function(){var e=(0,a.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==C){e.next=2;break}return e.abrupt("return");case 2:return b(!0),j(null),e.prev=4,e.next=7,p.Z.getSearchMovie(C,D);case 7:t=e.sent,console.log(t),o((function(e){return[].concat((0,r.Z)(e),(0,r.Z)(t.results))})),H(t.total_pages),e.next=18;break;case 13:if(e.prev=13,e.t0=e.catch(4),!l.Z.isCancel(e.t0)){e.next=17;break}return e.abrupt("return");case 17:j("\u0429\u043e\u0441\u044c \u043f\u0456\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a... \u0421\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0449\u0435 \u0440\u0430\u0437!");case 18:return e.prev=18,b(!1),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[4,13,18,21]])})));return function(){return e.apply(this,arguments)}}();e()}),[C,D]),(0,c.useEffect)((function(){k&&s.Am.error(k)}),[k]);return(0,f.jsxs)("div",{children:[(0,f.jsx)(m,{onSubmit:function(e){F(e),A(1),o([])}}),(0,f.jsx)(g.Z,{movies:n}),D<U&&(0,f.jsx)(v,{addPage:function(){A((function(e){return e+1}))}}),_&&(0,f.jsx)(d.Z,{}),(0,f.jsx)(s.x7,{position:"top-right"})]})}}}]);
//# sourceMappingURL=584.33dd4491.chunk.js.map